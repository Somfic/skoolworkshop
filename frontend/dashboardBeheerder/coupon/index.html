<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="../../opmaak/opmaak.css" />
  </head>
  <body>
    <ul class="topnav">
      <li class="dropdown">
        <a href="../gebruiker/gebruikerLijst/index.html">Gebruikers</a>
        <div class="dropdown-content">
          <a href="../gebruiker/gebruikerAanmaken/aanmaken.html">Aanmaken</a>
          <a href="../gebruiker/gebruikerLijst/index.html">Deelnemers</a>
        </div>
      </li>
      <li class="dropdown">
        <a href="../workshop/workshopStatistiek/index.html">Workshops</a>
        <div class="dropdown-content">
          <a href="../workshop/workshopaanmaken/index.html">Aanmaken</a>
          <a href="../workshop/workshopStatistiek/index.html">Statistieken</a>
          <a href="../workshop/workshopdelete/index.html">Verwijderen</a>
        </div>
      </li>
    </li>
    <li class="dropdown">
      <a href="../factuur/index.html">Facturen</a>
      <div class="dropdown-content">
        <a href="../factuur/facturenaanmaken/index.html">Uploaden</a>
      </div>
    </li>
    <li class="dropdown">
        <a class="active" href="../coupon/index.html">Coupon</a>
        <div class="dropdown-content">
          <a href="../coupon/couponaanmaken/index.html">Aanmaken</a>
        </div>
      </li>
  
      <li class="right"><a href="#">Uitloggen</a></li>
    </ul>

      <div class="containermid">
        <h1>Overzicht coupons</h1>
        <p>Een overzicht van alle coupons. Klik op een coupon om details te zien, <a class="link" href="couponAanmaken/index.html">of maak een nieuwe coupon aan</a>.</p>
        <hr>

          <table>
              <tr>
                  <th>Code</th>
                  <th>Waarde</th>
                  <th>Max. bedrag</th>
                  <th>Aantal gebruikt</th>
                  <th>Organisatie</th>
              </tr>
              <tbody id="coupons"></tbody>
          </table>
      </div>
      <script src="../../scripts/requests.js"></script>
      <script>
        getAll();

        function getAll() {
          console.log('getall');  
          sendGetRequest(apiUrl + '/api/coupon/all')
            .then((data) => {
              console.log(data.Coupons);
              let tableBody = document.getElementById('coupons');
              
              let rows = '';
                        if (data.Coupons) {
                            data.Coupons.forEach((item) => {
                                console.log(item);
                                rows += // Column namen van de data die je opvraagt
                                    `<tr onclick='document.location.href="./couponDetails/index.html?id=${item.ID}"'><td>${item.Code}</td>` + //
                                    `<td>${item.Value}</td>` +
                                    `<td>${item.MaxBedrag}</td>` +
                                    `<td>${item.AantalGebruikt} / ${item.MaxGebruik}</td>` +
                                    `<td>${item.Organisatie}</td></tr>`;

                                console.log(item.ID);
                            });

                            tableBody.innerHTML = rows; // Stop de aangemaakte tablerows in de body van de eerder gemaakt table
                        } else {
                            let niks = '';
                            tableBody.innerHTML = niks;
                        }
            });
          }
      </script>
</body>
</html>